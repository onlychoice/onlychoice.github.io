<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: rabbit_test | SHOW ME THE CODE]]></title>
  <link href="http://onlychoice.github.io/blog/categories/rabbit-test/atom.xml" rel="self"/>
  <link href="http://onlychoice.github.io/"/>
  <updated>2013-08-26T13:08:54+08:00</updated>
  <id>http://onlychoice.github.io/</id>
  <author>
    <name><![CDATA[Zhihui Jiao]]></name>
    <email><![CDATA[jzhihui521@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Blog entry for plugin test]]></title>
    <link href="http://onlychoice.github.io/blog/2013/08/25/blog-entry-for-plugin-test/"/>
    <updated>2013-08-25T22:29:00+08:00</updated>
    <id>http://onlychoice.github.io/blog/2013/08/25/blog-entry-for-plugin-test</id>
    <content type="html"><![CDATA[<pre class="prettyprint linenums lang-erlang">
do_connect(State = #conn{host = Host, port = Port, server_index = ServerIndex,
                         protocol = Protocol, worker = Worker}) ->
    case connect(Host, Port) of
        {ok, Sock} ->
            {ok, BackendReader} = rabbit_proxy_reader:start_link(Sock, self(),
                                                                 Protocol,
                                                                 ServerIndex),
            gen_tcp:controlling_process(Sock, BackendReader),
            Worker ! {connection_created, ServerIndex, self()},
            State#conn{sock = Sock, backend_reader = BackendReader};
        {error, _Reason} ->
            %% try again after 30 minutes
            erlang:send_after(?LONGER_SLEEP_TIME, self(), reconnect),
            State#conn{sock = none}
    end.
</pre>

]]></content>
  </entry>
  
</feed>
